<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
<title>サイバーパンク風 Chatbot - フルスクリーン対応</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Orbitron&display=swap');

  /* 全画面対応のためbodyとhtmlを高さ100%に */
  html, body {
    height: 100%;
    margin: 0;
    background: #0f0f16;
    color: #00ffea;
    font-family: 'Orbitron', monospace, monospace;
    display: flex;
    flex-direction: column;
  }

  h1 {
    text-align: center;
    color: #ff00ff;
    text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff;
    font-weight: 900;
    letter-spacing: 0.15em;
    margin: 20px 0 0 0;
    user-select: none;
  }

  #subtitle {
    text-align: center;
    color: #00ffea;
    text-shadow: 0 0 8px #00ffea;
    margin: -8px 0 15px 0;
    font-size: 1.1em;
    font-weight: 600;
    letter-spacing: 0.1em;
    user-select: none;
  }

  #chatbox {
    background: #12121f;
    border: 2px solid #00ffea;
    border-radius: 10px;
    padding: 15px;
    flex-grow: 1;
    margin: 0 20px;
    overflow-y: auto;
    box-shadow: 0 0 15px #00ffea;
    user-select: text;
  }

  .user-msg {
    color: #ff00ff;
    margin: 8px 0;
    text-align: right;
    text-shadow: 0 0 6px #ff00ff;
    font-weight: 700;
  }

  .bot-msg {
    color: #00ffea;
    margin: 8px 0;
    text-align: left;
    text-shadow: 0 0 6px #00ffea;
    font-weight: 700;
  }

  #input-area {
    margin: 15px 20px 20px 20px;
    display: flex;
    justify-content: center;
  }

  #input-text {
    flex-grow: 1;
    background: #12121f;
    border: 2px solid #ff00ff;
    border-radius: 5px 0 0 5px;
    color: #00ffea;
    padding: 12px;
    font-size: 1.1em;
    outline: none;
    box-shadow: 0 0 10px #ff00ff inset;
  }

  #input-text::placeholder {
    color: #555;
    letter-spacing: 0.1em;
  }

  #send-btn {
    background: #ff00ff;
    border: none;
    border-radius: 0 5px 5px 0;
    color: #0f0f16;
    padding: 12px 25px;
    font-weight: 900;
    cursor: pointer;
    box-shadow: 0 0 15px #ff00ff;
    transition: background 0.3s ease;
    letter-spacing: 0.12em;
  }

  #send-btn:hover {
    background: #e600e6;
  }

  #error {
    color: #ff0044;
    margin: 0 20px 15px 20px;
    text-align: center;
    text-shadow: 0 0 10px #ff0044;
    font-weight: 700;
    letter-spacing: 0.1em;
    min-height: 24px;
    user-select: none;
  }

  /* スクロールバーをネオン風にカスタマイズ(Webkit系) */
  #chatbox::-webkit-scrollbar {
    width: 8px;
  }
  #chatbox::-webkit-scrollbar-track {
    background: #12121f;
  }
  #chatbox::-webkit-scrollbar-thumb {
    background: #ff00ff;
    border-radius: 4px;
    box-shadow: 0 0 8px #ff00ff;
  }
</style>
</head>
<body>

<h1>NEON NODE GPT-4o-mini</h1>
<div id="subtitle"># Engage the digital frontier. Speak your code.</div>

<div id="chatbox"></div>

<div id="input-area">
  <input type="text" id="input-text" placeholder="> INPUT YOUR COMMAND..." autocomplete="off" />
  <button id="send-btn">TRANSMIT</button>
</div>

<div id="error"></div>

<script>
  const chatbox = document.getElementById('chatbox');
  const inputText = document.getElementById('input-text');
  const sendBtn = document.getElementById('send-btn');
  const errorDiv = document.getElementById('error');

  const API_KEY = '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';
  const ENDPOINT = 'https://api.openai.com/v1/chat/completions';

  sendBtn.addEventListener('click', () => {
    const message = inputText.value.trim();
    if (!message) return;
    appendMessage('user', message);
    inputText.value = '';
    errorDiv.textContent = '';
    callOpenAI(message);
  });

  inputText.addEventListener('keypress', (e) => {
    if (e.key === 'Enter') sendBtn.click();
  });

  function appendMessage(role, text) {
    const div = document.createElement('div');
    div.textContent = text;
    div.className = role === 'user' ? 'user-msg' : 'bot-msg';
    chatbox.appendChild(div);
    chatbox.scrollTop = chatbox.scrollHeight;
  }

  async function callOpenAI(message) {
    try {
      const res = await fetch(ENDPOINT, {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json',
          'Authorization': `Bearer ${API_KEY}`
        },
        body: JSON.stringify({
          model: 'gpt-4o-mini',
          messages: [{ role: 'user', content: message }]
        })
      });

      if (!res.ok) {
        const errorData = await res.json();
        throw new Error(errorData.error.message || 'APIエラーが発生しました');
      }

      const data = await res.json();
      const reply = data.choices[0].message.content;
      appendMessage('bot', reply);
    } catch (err) {
      errorDiv.textContent = 'ERROR: ' + err.message.toUpperCase();
    }
  }
</script>

</body>
</html>


